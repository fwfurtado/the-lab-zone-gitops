actions:
  enabled: true

  giteaRootURL: "http://gitea-http.gitea.svc.cluster.local:3000"

  existingSecret: gitea-runner-token
  existingSecretKey: token

  statefulset:
    replicas: 2

    actRunner:
      config:
        runner:
          capacity: 2
          labels:
            - "ubuntu-latest:docker://ghcr.io/catthehacker/ubuntu:act-latest"
            - "ubuntu-22.04:docker://ghcr.io/catthehacker/ubuntu:act-22.04"
        cache:
          external_server: "http://gha-cache-server.gitea-runners.svc.cluster.local:3000/"

    dind:
      repository: docker
      tag: "28.3.3-dind"
      extraArgs:
        - "--dns=1.1.1.1"
        - "--dns=8.8.8.8"

    persistence:
      size: 2Gi
      storageClass: truenas-nfs

    resources:
      requests:
        cpu: 200m
        memory: 512Mi
      limits:
        cpu: "2"
        memory: 2Gi

cacheServer:
  image:
    repository: ghcr.io/falcondev-oss/github-actions-cache-server
    tag: "8.1.4"
  replicas: 1
  port: 3000
  env:
    # Storage driver: s3 for Garage
    STORAGE_DRIVER: s3
    STORAGE_S3_BUCKET: actions-cache
    AWS_REGION: garage
    ENABLE_DIRECT_DOWNLOADS: "true"
    CACHE_CLEANUP_OLDER_THAN_DAYS: "30"
  s3SecretName: gha-cache-s3-credentials
  persistence:
    size: 5Gi
    storageClass: truenas-nfs
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 256Mi
