meta-monitoring:
  # Namespaces to monitor
  namespacesToMonitor:
    - monitoring
    - argocd
    - traefik
    - kube-system

  clusterLabelValue: "platform"

  # Disable cloud mode - running everything locally
  cloud:
    logs:
      enabled: false
    metrics:
      enabled: false
    traces:
      enabled: false

  # Enable local mode
  local:
    grafana:
      enabled: true
    logs:
      enabled: true
    metrics:
      enabled: true
    traces:
      enabled: true
    minio:
      enabled: true

  # Grafana configuration (meta-monitoring deploys its own Grafana, not a subchart)
  grafana:
    ingress:
      enabled: false  # We use Traefik IngressRoute instead

  # Disable ruler-for-dashboards deployment: chart names it {{ Release.Namespace }}-mimir-*
  # but ConfigMaps are {{ Release.Name }}-mimir-*, so the pod would fail (Missing config).
  # Setting this to false removes that deployment and keeps Argo in sync.
  dashboards:
    logs:
      enabled: false

  # Use democratic-csi StorageClass (truenas-nfs) so PVCs bind.
  # Buckets must exist for Loki, Mimir and Tempo; list is explicit so they are always created.
  minio:
    persistence:
      storageClassName: truenas-nfs
    buckets:
      - name: loki-chunks
        policy: none
        purge: false
      - name: loki-ruler
        policy: none
        purge: false
      - name: tempo
        policy: none
        purge: false
      - name: mimir-ruler
        policy: none
        purge: false
      - name: mimir-tsdb
        policy: none
        purge: false
  mimir-distributed:
    minio:
      persistence:
        storageClassName: truenas-nfs
  tempo-distributed:
    minio:
      persistence:
        storageClassName: truenas-nfs
  loki:
    minio:
      persistence:
        storageClassName: truenas-nfs
