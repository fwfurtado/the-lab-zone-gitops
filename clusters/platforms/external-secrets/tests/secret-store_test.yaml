suite: external secrets secret store
templates:
  - templates/secret-store.yaml
tests:
  - it: renders onepassword SDK secret store
    documentSelector:
      path: kind
      value: SecretStore
    asserts:
      - equal:
          path: metadata.name
          value: 1password-sdk
      - equal:
          path: spec.provider.onepasswordSDK.vault
          value: staging
      - equal:
          path: spec.provider.onepasswordSDK.auth.serviceAccountSecretRef.name
          value: onepassword-credentials
      - equal:
          path: spec.provider.onepasswordSDK.auth.serviceAccountSecretRef.key
          value: token
      - equal:
          path: spec.provider.onepasswordSDK.cache.ttl
          value: 5m
      - equal:
          path: spec.provider.onepasswordSDK.cache.maxSize
          value: 100
